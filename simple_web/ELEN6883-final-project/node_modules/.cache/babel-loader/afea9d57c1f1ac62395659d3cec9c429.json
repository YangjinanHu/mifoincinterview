{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.loadTsNode = exports.isTypescriptSupported = exports.isRunningWithTypescript = exports.willRunWithTypescript = void 0;\n\nconst config_loading_1 = require(\"./config/config-loading\");\n\nconst errors_1 = require(\"./errors\");\n\nconst errors_list_1 = require(\"./errors-list\");\n\nconst execution_mode_1 = require(\"./execution-mode\");\n\nlet cachedIsTypescriptSupported;\n/**\n * Returns true if Hardhat will run in using typescript mode.\n * @param configPath The config path if provider by the user.\n */\n\nfunction willRunWithTypescript(configPath) {\n  const config = (0, config_loading_1.resolveConfigPath)(configPath);\n  return isTypescriptFile(config);\n}\n\nexports.willRunWithTypescript = willRunWithTypescript;\n/**\n * Returns true if an Hardhat is already running with typescript.\n */\n\nfunction isRunningWithTypescript(config) {\n  return isTypescriptFile(config.paths.configFile);\n}\n\nexports.isRunningWithTypescript = isRunningWithTypescript;\n\nfunction isTypescriptSupported() {\n  if (cachedIsTypescriptSupported === undefined) {\n    try {\n      // We resolve these from Hardhat's installation.\n      require.resolve(\"typescript\");\n\n      require.resolve(\"ts-node\");\n\n      cachedIsTypescriptSupported = true;\n    } catch (_a) {\n      cachedIsTypescriptSupported = false;\n    }\n  }\n\n  return cachedIsTypescriptSupported;\n}\n\nexports.isTypescriptSupported = isTypescriptSupported;\n\nfunction loadTsNode(tsConfigPath) {\n  try {\n    require.resolve(\"typescript\");\n  } catch (_a) {\n    throw new errors_1.HardhatError(errors_list_1.ERRORS.GENERAL.TYPESCRIPT_NOT_INSTALLED);\n  }\n\n  try {\n    require.resolve(\"ts-node\");\n  } catch (_b) {\n    throw new errors_1.HardhatError(errors_list_1.ERRORS.GENERAL.TS_NODE_NOT_INSTALLED);\n  } // If we are running tests we just want to transpile\n\n\n  if ((0, execution_mode_1.isRunningHardhatCoreTests)()) {\n    // eslint-disable-next-line import/no-extraneous-dependencies\n    require(\"ts-node/register/transpile-only\");\n\n    return;\n  }\n\n  if (tsConfigPath !== undefined) {\n    process.env.TS_NODE_PROJECT = tsConfigPath;\n  } // See: https://github.com/nomiclabs/hardhat/issues/265\n\n\n  if (process.env.TS_NODE_FILES === undefined) {\n    process.env.TS_NODE_FILES = \"true\";\n  } // eslint-disable-next-line import/no-extraneous-dependencies\n\n\n  require(\"ts-node/register\");\n}\n\nexports.loadTsNode = loadTsNode;\n\nfunction isTypescriptFile(path) {\n  return path.endsWith(\".ts\");\n}","map":{"version":3,"mappings":";;;;;;;AAEA;;AACA;;AACA;;AACA;;AAEA,IAAIA,2BAAJ;AAEA;;;;;AAIA,SAAgBC,qBAAhB,CAAsCC,UAAtC,EAAyD;AACvD,QAAMC,MAAM,GAAG,wCAAkBD,UAAlB,CAAf;AACA,SAAOE,gBAAgB,CAACD,MAAD,CAAvB;AACD;;AAHDE;AAKA;;;;AAGA,SAAgBC,uBAAhB,CAAwCH,MAAxC,EAA6D;AAC3D,SAAOC,gBAAgB,CAACD,MAAM,CAACI,KAAP,CAAaC,UAAd,CAAvB;AACD;;AAFDH;;AAIA,SAAgBI,qBAAhB,GAAqC;AACnC,MAAIT,2BAA2B,KAAKU,SAApC,EAA+C;AAC7C,QAAI;AACF;AACAC,aAAO,CAACC,OAAR,CAAgB,YAAhB;;AACAD,aAAO,CAACC,OAAR,CAAgB,SAAhB;;AACAZ,iCAA2B,GAAG,IAA9B;AACD,KALD,CAKE,WAAM;AACNA,iCAA2B,GAAG,KAA9B;AACD;AACF;;AAED,SAAOA,2BAAP;AACD;;AAbDK;;AAeA,SAAgBQ,UAAhB,CAA2BC,YAA3B,EAAgD;AAC9C,MAAI;AACFH,WAAO,CAACC,OAAR,CAAgB,YAAhB;AACD,GAFD,CAEE,WAAM;AACN,UAAM,IAAIG,qBAAJ,CAAiBC,qBAAOC,OAAP,CAAeC,wBAAhC,CAAN;AACD;;AAED,MAAI;AACFP,WAAO,CAACC,OAAR,CAAgB,SAAhB;AACD,GAFD,CAEE,WAAM;AACN,UAAM,IAAIG,qBAAJ,CAAiBC,qBAAOC,OAAP,CAAeE,qBAAhC,CAAN;AACD,GAX6C,CAa9C;;;AACA,MAAI,iDAAJ,EAAiC;AAC/B;AACAR,WAAO,CAAC,iCAAD,CAAP;;AACA;AACD;;AAED,MAAIG,YAAY,KAAKJ,SAArB,EAAgC;AAC9BU,WAAO,CAACC,GAAR,CAAYC,eAAZ,GAA8BR,YAA9B;AACD,GAtB6C,CAwB9C;;;AACA,MAAIM,OAAO,CAACC,GAAR,CAAYE,aAAZ,KAA8Bb,SAAlC,EAA6C;AAC3CU,WAAO,CAACC,GAAR,CAAYE,aAAZ,GAA4B,MAA5B;AACD,GA3B6C,CA6B9C;;;AACAZ,SAAO,CAAC,kBAAD,CAAP;AACD;;AA/BDN;;AAiCA,SAASD,gBAAT,CAA0BoB,IAA1B,EAAsC;AACpC,SAAOA,IAAI,CAACC,QAAL,CAAc,KAAd,CAAP;AACD","names":["cachedIsTypescriptSupported","willRunWithTypescript","configPath","config","isTypescriptFile","exports","isRunningWithTypescript","paths","configFile","isTypescriptSupported","undefined","require","resolve","loadTsNode","tsConfigPath","errors_1","errors_list_1","GENERAL","TYPESCRIPT_NOT_INSTALLED","TS_NODE_NOT_INSTALLED","process","env","TS_NODE_PROJECT","TS_NODE_FILES","path","endsWith"],"sources":["/Users/huyangjinan/Columbia/Blockchain/FinalProject/ELEN6883-final-project/node_modules/hardhat/src/internal/core/typescript-support.ts"],"sourcesContent":["import { HardhatConfig } from \"../../types\";\n\nimport { resolveConfigPath } from \"./config/config-loading\";\nimport { HardhatError } from \"./errors\";\nimport { ERRORS } from \"./errors-list\";\nimport { isRunningHardhatCoreTests } from \"./execution-mode\";\n\nlet cachedIsTypescriptSupported: boolean | undefined;\n\n/**\n * Returns true if Hardhat will run in using typescript mode.\n * @param configPath The config path if provider by the user.\n */\nexport function willRunWithTypescript(configPath?: string): boolean {\n  const config = resolveConfigPath(configPath);\n  return isTypescriptFile(config);\n}\n\n/**\n * Returns true if an Hardhat is already running with typescript.\n */\nexport function isRunningWithTypescript(config: HardhatConfig): boolean {\n  return isTypescriptFile(config.paths.configFile);\n}\n\nexport function isTypescriptSupported() {\n  if (cachedIsTypescriptSupported === undefined) {\n    try {\n      // We resolve these from Hardhat's installation.\n      require.resolve(\"typescript\");\n      require.resolve(\"ts-node\");\n      cachedIsTypescriptSupported = true;\n    } catch {\n      cachedIsTypescriptSupported = false;\n    }\n  }\n\n  return cachedIsTypescriptSupported;\n}\n\nexport function loadTsNode(tsConfigPath?: string) {\n  try {\n    require.resolve(\"typescript\");\n  } catch {\n    throw new HardhatError(ERRORS.GENERAL.TYPESCRIPT_NOT_INSTALLED);\n  }\n\n  try {\n    require.resolve(\"ts-node\");\n  } catch {\n    throw new HardhatError(ERRORS.GENERAL.TS_NODE_NOT_INSTALLED);\n  }\n\n  // If we are running tests we just want to transpile\n  if (isRunningHardhatCoreTests()) {\n    // eslint-disable-next-line import/no-extraneous-dependencies\n    require(\"ts-node/register/transpile-only\");\n    return;\n  }\n\n  if (tsConfigPath !== undefined) {\n    process.env.TS_NODE_PROJECT = tsConfigPath;\n  }\n\n  // See: https://github.com/nomiclabs/hardhat/issues/265\n  if (process.env.TS_NODE_FILES === undefined) {\n    process.env.TS_NODE_FILES = \"true\";\n  }\n\n  // eslint-disable-next-line import/no-extraneous-dependencies\n  require(\"ts-node/register\");\n}\n\nfunction isTypescriptFile(path: string): boolean {\n  return path.endsWith(\".ts\");\n}\n"]},"metadata":{},"sourceType":"script"}