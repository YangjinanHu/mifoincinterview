{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ReturnData = void 0;\n\nconst ethereumjs_abi_1 = require(\"ethereumjs-abi\");\n\nconst errors_1 = require(\"../../core/errors\"); // selector of Error(string)\n\n\nconst ERROR_SELECTOR = \"08c379a0\"; // selector of Panic(uint256)\n\nconst PANIC_SELECTOR = \"4e487b71\";\n/**\n * Represents the returnData of a transaction, whose contents are unknown.\n */\n\nclass ReturnData {\n  constructor(value) {\n    this.value = value;\n\n    if (value.length >= 4) {\n      this._selector = value.slice(0, 4).toString(\"hex\");\n    }\n  }\n\n  isEmpty() {\n    return this.value.length === 0;\n  }\n\n  matchesSelector(selector) {\n    if (this._selector === undefined) {\n      return false;\n    }\n\n    return this._selector === selector.toString(\"hex\");\n  }\n\n  isErrorReturnData() {\n    return this._selector === ERROR_SELECTOR;\n  }\n\n  isPanicReturnData() {\n    return this._selector === PANIC_SELECTOR;\n  }\n\n  decodeError() {\n    if (this.isEmpty()) {\n      return \"\";\n    }\n\n    (0, errors_1.assertHardhatInvariant)(this._selector === ERROR_SELECTOR, \"Expected return data to be a Error(string)\");\n    const decoded = (0, ethereumjs_abi_1.rawDecode)([\"string\"], this.value.slice(4));\n    return decoded.toString(\"utf8\");\n  }\n\n  decodePanic() {\n    (0, errors_1.assertHardhatInvariant)(this._selector === PANIC_SELECTOR, \"Expected return data to be a Panic(uint256)\");\n    const [errorCode] = (0, ethereumjs_abi_1.rawDecode)([\"uint256\"], this.value.slice(4));\n    return errorCode;\n  }\n\n}\n\nexports.ReturnData = ReturnData;","map":{"version":3,"mappings":";;;;;;;AAAA;;AAGA,8C,CAEA;;;AACA,MAAMA,cAAc,GAAG,UAAvB,C,CACA;;AACA,MAAMC,cAAc,GAAG,UAAvB;AAEA;;;;AAGA,MAAaC,UAAb,CAAuB;AAGrBC,cAAmBC,KAAnB,EAAgC;AAAb;;AACjB,QAAIA,KAAK,CAACC,MAAN,IAAgB,CAApB,EAAuB;AACrB,WAAKC,SAAL,GAAiBF,KAAK,CAACG,KAAN,CAAY,CAAZ,EAAe,CAAf,EAAkBC,QAAlB,CAA2B,KAA3B,CAAjB;AACD;AACF;;AAEMC,SAAO;AACZ,WAAO,KAAKL,KAAL,CAAWC,MAAX,KAAsB,CAA7B;AACD;;AAEMK,iBAAe,CAACC,QAAD,EAAiB;AACrC,QAAI,KAAKL,SAAL,KAAmBM,SAAvB,EAAkC;AAChC,aAAO,KAAP;AACD;;AAED,WAAO,KAAKN,SAAL,KAAmBK,QAAQ,CAACH,QAAT,CAAkB,KAAlB,CAA1B;AACD;;AAEMK,mBAAiB;AACtB,WAAO,KAAKP,SAAL,KAAmBN,cAA1B;AACD;;AAEMc,mBAAiB;AACtB,WAAO,KAAKR,SAAL,KAAmBL,cAA1B;AACD;;AAEMc,aAAW;AAChB,QAAI,KAAKN,OAAL,EAAJ,EAAoB;AAClB,aAAO,EAAP;AACD;;AAED,yCACE,KAAKH,SAAL,KAAmBN,cADrB,EAEE,4CAFF;AAKA,UAAMgB,OAAO,GAAG,gCAAU,CAAC,QAAD,CAAV,EAAsB,KAAKZ,KAAL,CAAWG,KAAX,CAAiB,CAAjB,CAAtB,CAAhB;AACA,WAAOS,OAAO,CAACR,QAAR,CAAiB,MAAjB,CAAP;AACD;;AAEMS,aAAW;AAChB,yCACE,KAAKX,SAAL,KAAmBL,cADrB,EAEE,6CAFF;AAKA,UAAM,CAACiB,SAAD,IAAc,gCAAU,CAAC,SAAD,CAAV,EAAuB,KAAKd,KAAL,CAAWG,KAAX,CAAiB,CAAjB,CAAvB,CAApB;AAEA,WAAOW,SAAP;AACD;;AApDoB;;AAAvBC","names":["ERROR_SELECTOR","PANIC_SELECTOR","ReturnData","constructor","value","length","_selector","slice","toString","isEmpty","matchesSelector","selector","undefined","isErrorReturnData","isPanicReturnData","decodeError","decoded","decodePanic","errorCode","exports"],"sources":["/Users/huyangjinan/Columbia/Blockchain/FinalProject/ELEN6883-final-project/node_modules/hardhat/src/internal/hardhat-network/provider/return-data.ts"],"sourcesContent":["import { rawDecode } from \"ethereumjs-abi\";\nimport { BN } from \"ethereumjs-util\";\n\nimport { assertHardhatInvariant } from \"../../core/errors\";\n\n// selector of Error(string)\nconst ERROR_SELECTOR = \"08c379a0\";\n// selector of Panic(uint256)\nconst PANIC_SELECTOR = \"4e487b71\";\n\n/**\n * Represents the returnData of a transaction, whose contents are unknown.\n */\nexport class ReturnData {\n  private _selector: string | undefined;\n\n  constructor(public value: Buffer) {\n    if (value.length >= 4) {\n      this._selector = value.slice(0, 4).toString(\"hex\");\n    }\n  }\n\n  public isEmpty(): boolean {\n    return this.value.length === 0;\n  }\n\n  public matchesSelector(selector: Buffer): boolean {\n    if (this._selector === undefined) {\n      return false;\n    }\n\n    return this._selector === selector.toString(\"hex\");\n  }\n\n  public isErrorReturnData(): boolean {\n    return this._selector === ERROR_SELECTOR;\n  }\n\n  public isPanicReturnData(): boolean {\n    return this._selector === PANIC_SELECTOR;\n  }\n\n  public decodeError(): string {\n    if (this.isEmpty()) {\n      return \"\";\n    }\n\n    assertHardhatInvariant(\n      this._selector === ERROR_SELECTOR,\n      \"Expected return data to be a Error(string)\"\n    );\n\n    const decoded = rawDecode([\"string\"], this.value.slice(4));\n    return decoded.toString(\"utf8\");\n  }\n\n  public decodePanic(): BN {\n    assertHardhatInvariant(\n      this._selector === PANIC_SELECTOR,\n      \"Expected return data to be a Panic(uint256)\"\n    );\n\n    const [errorCode] = rawDecode([\"uint256\"], this.value.slice(4));\n\n    return errorCode;\n  }\n}\n"]},"metadata":{},"sourceType":"script"}