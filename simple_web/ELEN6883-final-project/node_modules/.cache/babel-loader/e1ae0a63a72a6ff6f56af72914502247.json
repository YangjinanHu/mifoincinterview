{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.showForkRecommendationsBannerIfNecessary = void 0;\n\nconst chalk_1 = __importDefault(require(\"chalk\"));\n\nconst fs_extra_1 = __importDefault(require(\"fs-extra\"));\n\nconst path_1 = __importDefault(require(\"path\"));\n\nfunction getAlreadyShownFilePath(forkCachePath) {\n  return path_1.default.join(forkCachePath, \"recommendations-already-shown.json\");\n}\n\nfunction displayBanner() {\n  console.warn(chalk_1.default.yellow(`You're running a network fork starting from the latest block.\nPerformance may degrade due to fetching data from the network with each run.\nIf connecting to an archival node (e.g. Alchemy), we strongly recommend setting\nblockNumber to a fixed value to increase performance with a local cache.`));\n}\n\nasync function showForkRecommendationsBannerIfNecessary(currentNetworkConfig, forkCachePath) {\n  var _a, _b;\n\n  if (!(\"forking\" in currentNetworkConfig)) {\n    return;\n  }\n\n  if (((_a = currentNetworkConfig.forking) === null || _a === void 0 ? void 0 : _a.enabled) !== true) {\n    return;\n  }\n\n  if (((_b = currentNetworkConfig.forking) === null || _b === void 0 ? void 0 : _b.blockNumber) !== undefined) {\n    return;\n  }\n\n  const shownPath = getAlreadyShownFilePath(forkCachePath);\n\n  if (await fs_extra_1.default.pathExists(shownPath)) {\n    return;\n  }\n\n  displayBanner();\n  await fs_extra_1.default.ensureDir(path_1.default.dirname(shownPath));\n  await fs_extra_1.default.writeJSON(shownPath, true);\n}\n\nexports.showForkRecommendationsBannerIfNecessary = showForkRecommendationsBannerIfNecessary;","map":{"version":3,"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;AAIA,SAASA,uBAAT,CAAiCC,aAAjC,EAAsD;AACpD,SAAOC,eAAKC,IAAL,CAAUF,aAAV,EAAyB,oCAAzB,CAAP;AACD;;AAED,SAASG,aAAT,GAAsB;AACpBC,SAAO,CAACC,IAAR,CACEC,gBAAMC,MAAN,CACE;;;yEADF,CADF;AAQD;;AAEM,eAAeC,wCAAf,CACLC,oBADK,EAELT,aAFK,EAEgB;;;AAErB,MAAI,EAAE,aAAaS,oBAAf,CAAJ,EAA0C;AACxC;AACD;;AAED,MAAI,2BAAoB,CAACC,OAArB,MAA4B,IAA5B,IAA4BC,aAA5B,GAA4B,MAA5B,GAA4BA,GAAEC,OAA9B,MAA0C,IAA9C,EAAoD;AAClD;AACD;;AAED,MAAI,2BAAoB,CAACF,OAArB,MAA4B,IAA5B,IAA4BG,aAA5B,GAA4B,MAA5B,GAA4BA,GAAEC,WAA9B,MAA8CC,SAAlD,EAA6D;AAC3D;AACD;;AAED,QAAMC,SAAS,GAAGjB,uBAAuB,CAACC,aAAD,CAAzC;;AAEA,MAAI,MAAMiB,mBAAQC,UAAR,CAAmBF,SAAnB,CAAV,EAAyC;AACvC;AACD;;AAEDb,eAAa;AAEb,QAAMc,mBAAQE,SAAR,CAAkBlB,eAAKmB,OAAL,CAAaJ,SAAb,CAAlB,CAAN;AACA,QAAMC,mBAAQI,SAAR,CAAkBL,SAAlB,EAA6B,IAA7B,CAAN;AACD;;AA1BDM","names":["getAlreadyShownFilePath","forkCachePath","path_1","join","displayBanner","console","warn","chalk_1","yellow","showForkRecommendationsBannerIfNecessary","currentNetworkConfig","forking","_a","enabled","_b","blockNumber","undefined","shownPath","fs_extra_1","pathExists","ensureDir","dirname","writeJSON","exports"],"sources":["/Users/huyangjinan/Columbia/Blockchain/FinalProject/ELEN6883-final-project/node_modules/hardhat/src/internal/hardhat-network/provider/utils/fork-recomendations-banner.ts"],"sourcesContent":["import chalk from \"chalk\";\nimport fsExtra from \"fs-extra\";\nimport path from \"path\";\n\nimport { NetworkConfig } from \"../../../../types\";\n\nfunction getAlreadyShownFilePath(forkCachePath: string) {\n  return path.join(forkCachePath, \"recommendations-already-shown.json\");\n}\n\nfunction displayBanner() {\n  console.warn(\n    chalk.yellow(\n      `You're running a network fork starting from the latest block.\nPerformance may degrade due to fetching data from the network with each run.\nIf connecting to an archival node (e.g. Alchemy), we strongly recommend setting\nblockNumber to a fixed value to increase performance with a local cache.`\n    )\n  );\n}\n\nexport async function showForkRecommendationsBannerIfNecessary(\n  currentNetworkConfig: NetworkConfig,\n  forkCachePath: string\n) {\n  if (!(\"forking\" in currentNetworkConfig)) {\n    return;\n  }\n\n  if (currentNetworkConfig.forking?.enabled !== true) {\n    return;\n  }\n\n  if (currentNetworkConfig.forking?.blockNumber !== undefined) {\n    return;\n  }\n\n  const shownPath = getAlreadyShownFilePath(forkCachePath);\n\n  if (await fsExtra.pathExists(shownPath)) {\n    return;\n  }\n\n  displayBanner();\n\n  await fsExtra.ensureDir(path.dirname(shownPath));\n  await fsExtra.writeJSON(shownPath, true);\n}\n"]},"metadata":{},"sourceType":"script"}