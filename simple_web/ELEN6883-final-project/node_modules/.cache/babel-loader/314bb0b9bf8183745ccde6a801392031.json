{"ast":null,"code":"'use strict';\n/**\n * Various utility functions used throughout Mocha's codebase.\n * @module utils\n */\n\n/**\n * Module dependencies.\n */\n\nvar fs = require('fs');\n\nvar path = require('path');\n\nvar util = require('util');\n\nvar glob = require('glob');\n\nvar he = require('he');\n\nvar errors = require('./errors');\n\nvar createNoFilesMatchPatternError = errors.createNoFilesMatchPatternError;\nvar createMissingArgumentError = errors.createMissingArgumentError;\n\nvar assign = exports.assign = require('object.assign').getPolyfill();\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * @param {function} ctor - Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor - Constructor function to inherit prototype from.\n * @throws {TypeError} if either constructor is null, or if super constructor\n *     lacks a prototype.\n */\n\n\nexports.inherits = util.inherits;\n/**\n * Escape special characters in the given string of html.\n *\n * @private\n * @param  {string} html\n * @return {string}\n */\n\nexports.escape = function (html) {\n  return he.encode(String(html), {\n    useNamedReferences: false\n  });\n};\n/**\n * Test if the given obj is type of string.\n *\n * @private\n * @param {Object} obj\n * @return {boolean}\n */\n\n\nexports.isString = function (obj) {\n  return typeof obj === 'string';\n};\n/**\n * Compute a slug from the given `str`.\n *\n * @private\n * @param {string} str\n * @return {string}\n */\n\n\nexports.slug = function (str) {\n  return str.toLowerCase().replace(/\\s+/g, '-').replace(/[^-\\w]/g, '').replace(/-{2,}/g, '-');\n};\n/**\n * Strip the function definition from `str`, and re-indent for pre whitespace.\n *\n * @param {string} str\n * @return {string}\n */\n\n\nexports.clean = function (str) {\n  str = str.replace(/\\r\\n?|[\\n\\u2028\\u2029]/g, '\\n').replace(/^\\uFEFF/, '') // (traditional)->  space/name     parameters    body     (lambda)-> parameters       body   multi-statement/single          keep body content\n  .replace(/^function(?:\\s*|\\s+[^(]*)\\([^)]*\\)\\s*\\{((?:.|\\n)*?)\\s*\\}$|^\\([^)]*\\)\\s*=>\\s*(?:\\{((?:.|\\n)*?)\\s*\\}|((?:.|\\n)*))$/, '$1$2$3');\n  var spaces = str.match(/^\\n?( *)/)[1].length;\n  var tabs = str.match(/^\\n?(\\t*)/)[1].length;\n  var re = new RegExp('^\\n?' + (tabs ? '\\t' : ' ') + '{' + (tabs || spaces) + '}', 'gm');\n  str = str.replace(re, '');\n  return str.trim();\n};\n/**\n * Parse the given `qs`.\n *\n * @private\n * @param {string} qs\n * @return {Object}\n */\n\n\nexports.parseQuery = function (qs) {\n  return qs.replace('?', '').split('&').reduce(function (obj, pair) {\n    var i = pair.indexOf('=');\n    var key = pair.slice(0, i);\n    var val = pair.slice(++i); // Due to how the URLSearchParams API treats spaces\n\n    obj[key] = decodeURIComponent(val.replace(/\\+/g, '%20'));\n    return obj;\n  }, {});\n};\n/**\n * Highlight the given string of `js`.\n *\n * @private\n * @param {string} js\n * @return {string}\n */\n\n\nfunction highlight(js) {\n  return js.replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\/\\/(.*)/gm, '<span class=\"comment\">//$1</span>').replace(/('.*?')/gm, '<span class=\"string\">$1</span>').replace(/(\\d+\\.\\d+)/gm, '<span class=\"number\">$1</span>').replace(/(\\d+)/gm, '<span class=\"number\">$1</span>').replace(/\\bnew[ \\t]+(\\w+)/gm, '<span class=\"keyword\">new</span> <span class=\"init\">$1</span>').replace(/\\b(function|new|throw|return|var|if|else)\\b/gm, '<span class=\"keyword\">$1</span>');\n}\n/**\n * Highlight the contents of tag `name`.\n *\n * @private\n * @param {string} name\n */\n\n\nexports.highlightTags = function (name) {\n  var code = document.getElementById('mocha').getElementsByTagName(name);\n\n  for (var i = 0, len = code.length; i < len; ++i) {\n    code[i].innerHTML = highlight(code[i].innerHTML);\n  }\n};\n/**\n * If a value could have properties, and has none, this function is called,\n * which returns a string representation of the empty value.\n *\n * Functions w/ no properties return `'[Function]'`\n * Arrays w/ length === 0 return `'[]'`\n * Objects w/ no properties return `'{}'`\n * All else: return result of `value.toString()`\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {string} typeHint The type of the value\n * @returns {string}\n */\n\n\nfunction emptyRepresentation(value, typeHint) {\n  switch (typeHint) {\n    case 'function':\n      return '[Function]';\n\n    case 'object':\n      return '{}';\n\n    case 'array':\n      return '[]';\n\n    default:\n      return value.toString();\n  }\n}\n/**\n * Takes some variable and asks `Object.prototype.toString()` what it thinks it\n * is.\n *\n * @private\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/toString\n * @param {*} value The value to test.\n * @returns {string} Computed type\n * @example\n * type({}) // 'object'\n * type([]) // 'array'\n * type(1) // 'number'\n * type(false) // 'boolean'\n * type(Infinity) // 'number'\n * type(null) // 'null'\n * type(new Date()) // 'date'\n * type(/foo/) // 'regexp'\n * type('type') // 'string'\n * type(global) // 'global'\n * type(new String('foo') // 'object'\n */\n\n\nvar type = exports.type = function type(value) {\n  if (value === undefined) {\n    return 'undefined';\n  } else if (value === null) {\n    return 'null';\n  } else if (Buffer.isBuffer(value)) {\n    return 'buffer';\n  }\n\n  return Object.prototype.toString.call(value).replace(/^\\[.+\\s(.+?)]$/, '$1').toLowerCase();\n};\n/**\n * Stringify `value`. Different behavior depending on type of value:\n *\n * - If `value` is undefined or null, return `'[undefined]'` or `'[null]'`, respectively.\n * - If `value` is not an object, function or array, return result of `value.toString()` wrapped in double-quotes.\n * - If `value` is an *empty* object, function, or array, return result of function\n *   {@link emptyRepresentation}.\n * - If `value` has properties, call {@link exports.canonicalize} on it, then return result of\n *   JSON.stringify().\n *\n * @private\n * @see exports.type\n * @param {*} value\n * @return {string}\n */\n\n\nexports.stringify = function (value) {\n  var typeHint = type(value);\n\n  if (!~['object', 'array', 'function'].indexOf(typeHint)) {\n    if (typeHint === 'buffer') {\n      var json = Buffer.prototype.toJSON.call(value); // Based on the toJSON result\n\n      return jsonStringify(json.data && json.type ? json.data : json, 2).replace(/,(\\n|$)/g, '$1');\n    } // IE7/IE8 has a bizarre String constructor; needs to be coerced\n    // into an array and back to obj.\n\n\n    if (typeHint === 'string' && typeof value === 'object') {\n      value = value.split('').reduce(function (acc, char, idx) {\n        acc[idx] = char;\n        return acc;\n      }, {});\n      typeHint = 'object';\n    } else {\n      return jsonStringify(value);\n    }\n  }\n\n  for (var prop in value) {\n    if (Object.prototype.hasOwnProperty.call(value, prop)) {\n      return jsonStringify(exports.canonicalize(value, null, typeHint), 2).replace(/,(\\n|$)/g, '$1');\n    }\n  }\n\n  return emptyRepresentation(value, typeHint);\n};\n/**\n * like JSON.stringify but more sense.\n *\n * @private\n * @param {Object}  object\n * @param {number=} spaces\n * @param {number=} depth\n * @returns {*}\n */\n\n\nfunction jsonStringify(object, spaces, depth) {\n  if (typeof spaces === 'undefined') {\n    // primitive types\n    return _stringify(object);\n  }\n\n  depth = depth || 1;\n  var space = spaces * depth;\n  var str = Array.isArray(object) ? '[' : '{';\n  var end = Array.isArray(object) ? ']' : '}';\n  var length = typeof object.length === 'number' ? object.length : Object.keys(object).length; // `.repeat()` polyfill\n\n  function repeat(s, n) {\n    return new Array(n).join(s);\n  }\n\n  function _stringify(val) {\n    switch (type(val)) {\n      case 'null':\n      case 'undefined':\n        val = '[' + val + ']';\n        break;\n\n      case 'array':\n      case 'object':\n        val = jsonStringify(val, spaces, depth + 1);\n        break;\n\n      case 'boolean':\n      case 'regexp':\n      case 'symbol':\n      case 'number':\n        val = val === 0 && 1 / val === -Infinity // `-0`\n        ? '-0' : val.toString();\n        break;\n\n      case 'date':\n        var sDate = isNaN(val.getTime()) ? val.toString() : val.toISOString();\n        val = '[Date: ' + sDate + ']';\n        break;\n\n      case 'buffer':\n        var json = val.toJSON(); // Based on the toJSON result\n\n        json = json.data && json.type ? json.data : json;\n        val = '[Buffer: ' + jsonStringify(json, 2, depth + 1) + ']';\n        break;\n\n      default:\n        val = val === '[Function]' || val === '[Circular]' ? val : JSON.stringify(val);\n      // string\n    }\n\n    return val;\n  }\n\n  for (var i in object) {\n    if (!Object.prototype.hasOwnProperty.call(object, i)) {\n      continue; // not my business\n    }\n\n    --length;\n    str += '\\n ' + repeat(' ', space) + (Array.isArray(object) ? '' : '\"' + i + '\": ') + // key\n    _stringify(object[i]) + ( // value\n    length ? ',' : ''); // comma\n  }\n\n  return str + ( // [], {}\n  str.length !== 1 ? '\\n' + repeat(' ', --space) + end : end);\n}\n/**\n * Return a new Thing that has the keys in sorted order. Recursive.\n *\n * If the Thing...\n * - has already been seen, return string `'[Circular]'`\n * - is `undefined`, return string `'[undefined]'`\n * - is `null`, return value `null`\n * - is some other primitive, return the value\n * - is not a primitive or an `Array`, `Object`, or `Function`, return the value of the Thing's `toString()` method\n * - is a non-empty `Array`, `Object`, or `Function`, return the result of calling this function again.\n * - is an empty `Array`, `Object`, or `Function`, return the result of calling `emptyRepresentation()`\n *\n * @private\n * @see {@link exports.stringify}\n * @param {*} value Thing to inspect.  May or may not have properties.\n * @param {Array} [stack=[]] Stack of seen values\n * @param {string} [typeHint] Type hint\n * @return {(Object|Array|Function|string|undefined)}\n */\n\n\nexports.canonicalize = function canonicalize(value, stack, typeHint) {\n  var canonicalizedObj;\n  /* eslint-disable no-unused-vars */\n\n  var prop;\n  /* eslint-enable no-unused-vars */\n\n  typeHint = typeHint || type(value);\n\n  function withStack(value, fn) {\n    stack.push(value);\n    fn();\n    stack.pop();\n  }\n\n  stack = stack || [];\n\n  if (stack.indexOf(value) !== -1) {\n    return '[Circular]';\n  }\n\n  switch (typeHint) {\n    case 'undefined':\n    case 'buffer':\n    case 'null':\n      canonicalizedObj = value;\n      break;\n\n    case 'array':\n      withStack(value, function () {\n        canonicalizedObj = value.map(function (item) {\n          return exports.canonicalize(item, stack);\n        });\n      });\n      break;\n\n    case 'function':\n      /* eslint-disable guard-for-in */\n      for (prop in value) {\n        canonicalizedObj = {};\n        break;\n      }\n      /* eslint-enable guard-for-in */\n\n\n      if (!canonicalizedObj) {\n        canonicalizedObj = emptyRepresentation(value, typeHint);\n        break;\n      }\n\n    /* falls through */\n\n    case 'object':\n      canonicalizedObj = canonicalizedObj || {};\n      withStack(value, function () {\n        Object.keys(value).sort().forEach(function (key) {\n          canonicalizedObj[key] = exports.canonicalize(value[key], stack);\n        });\n      });\n      break;\n\n    case 'date':\n    case 'number':\n    case 'regexp':\n    case 'boolean':\n    case 'symbol':\n      canonicalizedObj = value;\n      break;\n\n    default:\n      canonicalizedObj = value + '';\n  }\n\n  return canonicalizedObj;\n};\n/**\n * Determines if pathname has a matching file extension.\n *\n * @private\n * @param {string} pathname - Pathname to check for match.\n * @param {string[]} exts - List of file extensions (sans period).\n * @return {boolean} whether file extension matches.\n * @example\n * hasMatchingExtname('foo.html', ['js', 'css']); // => false\n */\n\n\nfunction hasMatchingExtname(pathname, exts) {\n  var suffix = path.extname(pathname).slice(1);\n  return exts.some(function (element) {\n    return suffix === element;\n  });\n}\n/**\n * Determines if pathname would be a \"hidden\" file (or directory) on UN*X.\n *\n * @description\n * On UN*X, pathnames beginning with a full stop (aka dot) are hidden during\n * typical usage. Dotfiles, plain-text configuration files, are prime examples.\n *\n * @see {@link http://xahlee.info/UnixResource_dir/writ/unix_origin_of_dot_filename.html|Origin of Dot File Names}\n *\n * @private\n * @param {string} pathname - Pathname to check for match.\n * @return {boolean} whether pathname would be considered a hidden file.\n * @example\n * isHiddenOnUnix('.profile'); // => true\n */\n\n\nfunction isHiddenOnUnix(pathname) {\n  return path.basename(pathname)[0] === '.';\n}\n/**\n * Lookup file names at the given `path`.\n *\n * @description\n * Filenames are returned in _traversal_ order by the OS/filesystem.\n * **Make no assumption that the names will be sorted in any fashion.**\n *\n * @public\n * @memberof Mocha.utils\n * @param {string} filepath - Base path to start searching from.\n * @param {string[]} [extensions=[]] - File extensions to look for.\n * @param {boolean} [recursive=false] - Whether to recurse into subdirectories.\n * @return {string[]} An array of paths.\n * @throws {Error} if no files match pattern.\n * @throws {TypeError} if `filepath` is directory and `extensions` not provided.\n */\n\n\nexports.lookupFiles = function lookupFiles(filepath, extensions, recursive) {\n  extensions = extensions || [];\n  recursive = recursive || false;\n  var files = [];\n  var stat;\n\n  if (!fs.existsSync(filepath)) {\n    var pattern;\n\n    if (glob.hasMagic(filepath)) {\n      // Handle glob as is without extensions\n      pattern = filepath;\n    } else {\n      // glob pattern e.g. 'filepath+(.js|.ts)'\n      var strExtensions = extensions.map(function (v) {\n        return '.' + v;\n      }).join('|');\n      pattern = filepath + '+(' + strExtensions + ')';\n    }\n\n    files = glob.sync(pattern, {\n      nodir: true\n    });\n\n    if (!files.length) {\n      throw createNoFilesMatchPatternError('Cannot find any files matching pattern ' + exports.dQuote(filepath), filepath);\n    }\n\n    return files;\n  } // Handle file\n\n\n  try {\n    stat = fs.statSync(filepath);\n\n    if (stat.isFile()) {\n      return filepath;\n    }\n  } catch (err) {\n    // ignore error\n    return;\n  } // Handle directory\n\n\n  fs.readdirSync(filepath).forEach(function (dirent) {\n    var pathname = path.join(filepath, dirent);\n    var stat;\n\n    try {\n      stat = fs.statSync(pathname);\n\n      if (stat.isDirectory()) {\n        if (recursive) {\n          files = files.concat(lookupFiles(pathname, extensions, recursive));\n        }\n\n        return;\n      }\n    } catch (err) {\n      // ignore error\n      return;\n    }\n\n    if (!extensions.length) {\n      throw createMissingArgumentError(util.format('Argument %s required when argument %s is a directory', exports.sQuote('extensions'), exports.sQuote('filepath')), 'extensions', 'array');\n    }\n\n    if (!stat.isFile() || !hasMatchingExtname(pathname, extensions) || isHiddenOnUnix(pathname)) {\n      return;\n    }\n\n    files.push(pathname);\n  });\n  return files;\n};\n/**\n * process.emitWarning or a polyfill\n * @see https://nodejs.org/api/process.html#process_process_emitwarning_warning_options\n * @ignore\n */\n\n\nfunction emitWarning(msg, type) {\n  if (process.emitWarning) {\n    process.emitWarning(msg, type);\n  } else {\n    process.nextTick(function () {\n      console.warn(type + ': ' + msg);\n    });\n  }\n}\n/**\n * Show a deprecation warning. Each distinct message is only displayed once.\n * Ignores empty messages.\n *\n * @param {string} [msg] - Warning to print\n * @private\n */\n\n\nexports.deprecate = function deprecate(msg) {\n  msg = String(msg);\n\n  if (msg && !deprecate.cache[msg]) {\n    deprecate.cache[msg] = true;\n    emitWarning(msg, 'DeprecationWarning');\n  }\n};\n\nexports.deprecate.cache = {};\n/**\n * Show a generic warning.\n * Ignores empty messages.\n *\n * @param {string} [msg] - Warning to print\n * @private\n */\n\nexports.warn = function warn(msg) {\n  if (msg) {\n    emitWarning(msg);\n  }\n};\n/**\n * @summary\n * This Filter based on `mocha-clean` module.(see: `github.com/rstacruz/mocha-clean`)\n * @description\n * When invoking this function you get a filter function that get the Error.stack as an input,\n * and return a prettify output.\n * (i.e: strip Mocha and internal node functions from stack trace).\n * @returns {Function}\n */\n\n\nexports.stackTraceFilter = function () {\n  // TODO: Replace with `process.browser`\n  var is = typeof document === 'undefined' ? {\n    node: true\n  } : {\n    browser: true\n  };\n  var slash = path.sep;\n  var cwd;\n\n  if (is.node) {\n    cwd = exports.cwd() + slash;\n  } else {\n    cwd = (typeof location === 'undefined' ? window.location : location).href.replace(/\\/[^/]*$/, '/');\n    slash = '/';\n  }\n\n  function isMochaInternal(line) {\n    return ~line.indexOf('node_modules' + slash + 'mocha' + slash) || ~line.indexOf(slash + 'mocha.js') || ~line.indexOf(slash + 'mocha.min.js');\n  }\n\n  function isNodeInternal(line) {\n    return ~line.indexOf('(timers.js:') || ~line.indexOf('(events.js:') || ~line.indexOf('(node.js:') || ~line.indexOf('(module.js:') || ~line.indexOf('GeneratorFunctionPrototype.next (native)') || false;\n  }\n\n  return function (stack) {\n    stack = stack.split('\\n');\n    stack = stack.reduce(function (list, line) {\n      if (isMochaInternal(line)) {\n        return list;\n      }\n\n      if (is.node && isNodeInternal(line)) {\n        return list;\n      } // Clean up cwd(absolute)\n\n\n      if (/:\\d+:\\d+\\)?$/.test(line)) {\n        line = line.replace('(' + cwd, '(');\n      }\n\n      list.push(line);\n      return list;\n    }, []);\n    return stack.join('\\n');\n  };\n};\n/**\n * Crude, but effective.\n * @public\n * @param {*} value\n * @returns {boolean} Whether or not `value` is a Promise\n */\n\n\nexports.isPromise = function isPromise(value) {\n  return typeof value === 'object' && value !== null && typeof value.then === 'function';\n};\n/**\n * Clamps a numeric value to an inclusive range.\n *\n * @param {number} value - Value to be clamped.\n * @param {numer[]} range - Two element array specifying [min, max] range.\n * @returns {number} clamped value\n */\n\n\nexports.clamp = function clamp(value, range) {\n  return Math.min(Math.max(value, range[0]), range[1]);\n};\n/**\n * Single quote text by combining with undirectional ASCII quotation marks.\n *\n * @description\n * Provides a simple means of markup for quoting text to be used in output.\n * Use this to quote names of variables, methods, and packages.\n *\n * <samp>package 'foo' cannot be found</samp>\n *\n * @private\n * @param {string} str - Value to be quoted.\n * @returns {string} quoted value\n * @example\n * sQuote('n') // => 'n'\n */\n\n\nexports.sQuote = function (str) {\n  return \"'\" + str + \"'\";\n};\n/**\n * Double quote text by combining with undirectional ASCII quotation marks.\n *\n * @description\n * Provides a simple means of markup for quoting text to be used in output.\n * Use this to quote names of datatypes, classes, pathnames, and strings.\n *\n * <samp>argument 'value' must be \"string\" or \"number\"</samp>\n *\n * @private\n * @param {string} str - Value to be quoted.\n * @returns {string} quoted value\n * @example\n * dQuote('number') // => \"number\"\n */\n\n\nexports.dQuote = function (str) {\n  return '\"' + str + '\"';\n};\n/**\n * It's a noop.\n * @public\n */\n\n\nexports.noop = function () {};\n/**\n * Creates a map-like object.\n *\n * @description\n * A \"map\" is an object with no prototype, for our purposes. In some cases\n * this would be more appropriate than a `Map`, especially if your environment\n * doesn't support it. Recommended for use in Mocha's public APIs.\n *\n * @public\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map|MDN:Map}\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create#Custom_and_Null_objects|MDN:Object.create - Custom objects}\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign|MDN:Object.assign}\n * @param {...*} [obj] - Arguments to `Object.assign()`.\n * @returns {Object} An object with no prototype, having `...obj` properties\n */\n\n\nexports.createMap = function (obj) {\n  return assign.apply(null, [Object.create(null)].concat(Array.prototype.slice.call(arguments)));\n};\n/**\n * Creates a read-only map-like object.\n *\n * @description\n * This differs from {@link module:utils.createMap createMap} only in that\n * the argument must be non-empty, because the result is frozen.\n *\n * @see {@link module:utils.createMap createMap}\n * @param {...*} [obj] - Arguments to `Object.assign()`.\n * @returns {Object} A frozen object with no prototype, having `...obj` properties\n * @throws {TypeError} if argument is not a non-empty object.\n */\n\n\nexports.defineConstants = function (obj) {\n  if (type(obj) !== 'object' || !Object.keys(obj).length) {\n    throw new TypeError('Invalid argument; expected a non-empty object');\n  }\n\n  return Object.freeze(exports.createMap(obj));\n};\n/**\n * Whether current version of Node support ES modules\n *\n * @description\n * Versions prior to 10 did not support ES Modules, and version 10 has an old incompatibile version of ESM.\n * This function returns whether Node.JS has ES Module supports that is compatible with Mocha's needs,\n * which is version >=12.11.\n *\n * @returns {Boolean} whether the current version of Node.JS supports ES Modules in a way that is compatible with Mocha\n */\n\n\nexports.supportsEsModules = function () {\n  if (!process.browser && process.versions && process.versions.node) {\n    var versionFields = process.versions.node.split('.');\n    var major = +versionFields[0];\n    var minor = +versionFields[1];\n\n    if (major >= 13 || major === 12 && minor >= 11) {\n      return true;\n    }\n  }\n};\n/**\n * Returns current working directory\n *\n * Wrapper around `process.cwd()` for isolation\n * @private\n */\n\n\nexports.cwd = function cwd() {\n  return process.cwd();\n};","map":{"version":3,"sources":["/Users/huyangjinan/Columbia/Blockchain/FinalProject/ELEN6883-final-project/node_modules/mocha/lib/utils.js"],"names":["fs","require","path","util","glob","he","errors","createNoFilesMatchPatternError","createMissingArgumentError","assign","exports","getPolyfill","inherits","escape","html","encode","String","useNamedReferences","isString","obj","slug","str","toLowerCase","replace","clean","spaces","match","length","tabs","re","RegExp","trim","parseQuery","qs","split","reduce","pair","i","indexOf","key","slice","val","decodeURIComponent","highlight","js","highlightTags","name","code","document","getElementById","getElementsByTagName","len","innerHTML","emptyRepresentation","value","typeHint","toString","type","undefined","Buffer","isBuffer","Object","prototype","call","stringify","json","toJSON","jsonStringify","data","acc","char","idx","prop","hasOwnProperty","canonicalize","object","depth","_stringify","space","Array","isArray","end","keys","repeat","s","n","join","Infinity","sDate","isNaN","getTime","toISOString","JSON","stack","canonicalizedObj","withStack","fn","push","pop","map","item","sort","forEach","hasMatchingExtname","pathname","exts","suffix","extname","some","element","isHiddenOnUnix","basename","lookupFiles","filepath","extensions","recursive","files","stat","existsSync","pattern","hasMagic","strExtensions","v","sync","nodir","dQuote","statSync","isFile","err","readdirSync","dirent","isDirectory","concat","format","sQuote","emitWarning","msg","process","nextTick","console","warn","deprecate","cache","stackTraceFilter","is","node","browser","slash","sep","cwd","location","window","href","isMochaInternal","line","isNodeInternal","list","test","isPromise","then","clamp","range","Math","min","max","noop","createMap","apply","create","arguments","defineConstants","TypeError","freeze","supportsEsModules","versions","versionFields","major","minor"],"mappings":"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","sourcesContent":["'use strict';\n\n/**\n * Various utility functions used throughout Mocha's codebase.\n * @module utils\n */\n\n/**\n * Module dependencies.\n */\n\nvar fs = require('fs');\nvar path = require('path');\nvar util = require('util');\nvar glob = require('glob');\nvar he = require('he');\nvar errors = require('./errors');\nvar createNoFilesMatchPatternError = errors.createNoFilesMatchPatternError;\nvar createMissingArgumentError = errors.createMissingArgumentError;\n\nvar assign = (exports.assign = require('object.assign').getPolyfill());\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * @param {function} ctor - Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor - Constructor function to inherit prototype from.\n * @throws {TypeError} if either constructor is null, or if super constructor\n *     lacks a prototype.\n */\nexports.inherits = util.inherits;\n\n/**\n * Escape special characters in the given string of html.\n *\n * @private\n * @param  {string} html\n * @return {string}\n */\nexports.escape = function(html) {\n  return he.encode(String(html), {useNamedReferences: false});\n};\n\n/**\n * Test if the given obj is type of string.\n *\n * @private\n * @param {Object} obj\n * @return {boolean}\n */\nexports.isString = function(obj) {\n  return typeof obj === 'string';\n};\n\n/**\n * Compute a slug from the given `str`.\n *\n * @private\n * @param {string} str\n * @return {string}\n */\nexports.slug = function(str) {\n  return str\n    .toLowerCase()\n    .replace(/\\s+/g, '-')\n    .replace(/[^-\\w]/g, '')\n    .replace(/-{2,}/g, '-');\n};\n\n/**\n * Strip the function definition from `str`, and re-indent for pre whitespace.\n *\n * @param {string} str\n * @return {string}\n */\nexports.clean = function(str) {\n  str = str\n    .replace(/\\r\\n?|[\\n\\u2028\\u2029]/g, '\\n')\n    .replace(/^\\uFEFF/, '')\n    // (traditional)->  space/name     parameters    body     (lambda)-> parameters       body   multi-statement/single          keep body content\n    .replace(\n      /^function(?:\\s*|\\s+[^(]*)\\([^)]*\\)\\s*\\{((?:.|\\n)*?)\\s*\\}$|^\\([^)]*\\)\\s*=>\\s*(?:\\{((?:.|\\n)*?)\\s*\\}|((?:.|\\n)*))$/,\n      '$1$2$3'\n    );\n\n  var spaces = str.match(/^\\n?( *)/)[1].length;\n  var tabs = str.match(/^\\n?(\\t*)/)[1].length;\n  var re = new RegExp(\n    '^\\n?' + (tabs ? '\\t' : ' ') + '{' + (tabs || spaces) + '}',\n    'gm'\n  );\n\n  str = str.replace(re, '');\n\n  return str.trim();\n};\n\n/**\n * Parse the given `qs`.\n *\n * @private\n * @param {string} qs\n * @return {Object}\n */\nexports.parseQuery = function(qs) {\n  return qs\n    .replace('?', '')\n    .split('&')\n    .reduce(function(obj, pair) {\n      var i = pair.indexOf('=');\n      var key = pair.slice(0, i);\n      var val = pair.slice(++i);\n\n      // Due to how the URLSearchParams API treats spaces\n      obj[key] = decodeURIComponent(val.replace(/\\+/g, '%20'));\n\n      return obj;\n    }, {});\n};\n\n/**\n * Highlight the given string of `js`.\n *\n * @private\n * @param {string} js\n * @return {string}\n */\nfunction highlight(js) {\n  return js\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\\/\\/(.*)/gm, '<span class=\"comment\">//$1</span>')\n    .replace(/('.*?')/gm, '<span class=\"string\">$1</span>')\n    .replace(/(\\d+\\.\\d+)/gm, '<span class=\"number\">$1</span>')\n    .replace(/(\\d+)/gm, '<span class=\"number\">$1</span>')\n    .replace(\n      /\\bnew[ \\t]+(\\w+)/gm,\n      '<span class=\"keyword\">new</span> <span class=\"init\">$1</span>'\n    )\n    .replace(\n      /\\b(function|new|throw|return|var|if|else)\\b/gm,\n      '<span class=\"keyword\">$1</span>'\n    );\n}\n\n/**\n * Highlight the contents of tag `name`.\n *\n * @private\n * @param {string} name\n */\nexports.highlightTags = function(name) {\n  var code = document.getElementById('mocha').getElementsByTagName(name);\n  for (var i = 0, len = code.length; i < len; ++i) {\n    code[i].innerHTML = highlight(code[i].innerHTML);\n  }\n};\n\n/**\n * If a value could have properties, and has none, this function is called,\n * which returns a string representation of the empty value.\n *\n * Functions w/ no properties return `'[Function]'`\n * Arrays w/ length === 0 return `'[]'`\n * Objects w/ no properties return `'{}'`\n * All else: return result of `value.toString()`\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {string} typeHint The type of the value\n * @returns {string}\n */\nfunction emptyRepresentation(value, typeHint) {\n  switch (typeHint) {\n    case 'function':\n      return '[Function]';\n    case 'object':\n      return '{}';\n    case 'array':\n      return '[]';\n    default:\n      return value.toString();\n  }\n}\n\n/**\n * Takes some variable and asks `Object.prototype.toString()` what it thinks it\n * is.\n *\n * @private\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/toString\n * @param {*} value The value to test.\n * @returns {string} Computed type\n * @example\n * type({}) // 'object'\n * type([]) // 'array'\n * type(1) // 'number'\n * type(false) // 'boolean'\n * type(Infinity) // 'number'\n * type(null) // 'null'\n * type(new Date()) // 'date'\n * type(/foo/) // 'regexp'\n * type('type') // 'string'\n * type(global) // 'global'\n * type(new String('foo') // 'object'\n */\nvar type = (exports.type = function type(value) {\n  if (value === undefined) {\n    return 'undefined';\n  } else if (value === null) {\n    return 'null';\n  } else if (Buffer.isBuffer(value)) {\n    return 'buffer';\n  }\n  return Object.prototype.toString\n    .call(value)\n    .replace(/^\\[.+\\s(.+?)]$/, '$1')\n    .toLowerCase();\n});\n\n/**\n * Stringify `value`. Different behavior depending on type of value:\n *\n * - If `value` is undefined or null, return `'[undefined]'` or `'[null]'`, respectively.\n * - If `value` is not an object, function or array, return result of `value.toString()` wrapped in double-quotes.\n * - If `value` is an *empty* object, function, or array, return result of function\n *   {@link emptyRepresentation}.\n * - If `value` has properties, call {@link exports.canonicalize} on it, then return result of\n *   JSON.stringify().\n *\n * @private\n * @see exports.type\n * @param {*} value\n * @return {string}\n */\nexports.stringify = function(value) {\n  var typeHint = type(value);\n\n  if (!~['object', 'array', 'function'].indexOf(typeHint)) {\n    if (typeHint === 'buffer') {\n      var json = Buffer.prototype.toJSON.call(value);\n      // Based on the toJSON result\n      return jsonStringify(\n        json.data && json.type ? json.data : json,\n        2\n      ).replace(/,(\\n|$)/g, '$1');\n    }\n\n    // IE7/IE8 has a bizarre String constructor; needs to be coerced\n    // into an array and back to obj.\n    if (typeHint === 'string' && typeof value === 'object') {\n      value = value.split('').reduce(function(acc, char, idx) {\n        acc[idx] = char;\n        return acc;\n      }, {});\n      typeHint = 'object';\n    } else {\n      return jsonStringify(value);\n    }\n  }\n\n  for (var prop in value) {\n    if (Object.prototype.hasOwnProperty.call(value, prop)) {\n      return jsonStringify(\n        exports.canonicalize(value, null, typeHint),\n        2\n      ).replace(/,(\\n|$)/g, '$1');\n    }\n  }\n\n  return emptyRepresentation(value, typeHint);\n};\n\n/**\n * like JSON.stringify but more sense.\n *\n * @private\n * @param {Object}  object\n * @param {number=} spaces\n * @param {number=} depth\n * @returns {*}\n */\nfunction jsonStringify(object, spaces, depth) {\n  if (typeof spaces === 'undefined') {\n    // primitive types\n    return _stringify(object);\n  }\n\n  depth = depth || 1;\n  var space = spaces * depth;\n  var str = Array.isArray(object) ? '[' : '{';\n  var end = Array.isArray(object) ? ']' : '}';\n  var length =\n    typeof object.length === 'number'\n      ? object.length\n      : Object.keys(object).length;\n  // `.repeat()` polyfill\n  function repeat(s, n) {\n    return new Array(n).join(s);\n  }\n\n  function _stringify(val) {\n    switch (type(val)) {\n      case 'null':\n      case 'undefined':\n        val = '[' + val + ']';\n        break;\n      case 'array':\n      case 'object':\n        val = jsonStringify(val, spaces, depth + 1);\n        break;\n      case 'boolean':\n      case 'regexp':\n      case 'symbol':\n      case 'number':\n        val =\n          val === 0 && 1 / val === -Infinity // `-0`\n            ? '-0'\n            : val.toString();\n        break;\n      case 'date':\n        var sDate = isNaN(val.getTime()) ? val.toString() : val.toISOString();\n        val = '[Date: ' + sDate + ']';\n        break;\n      case 'buffer':\n        var json = val.toJSON();\n        // Based on the toJSON result\n        json = json.data && json.type ? json.data : json;\n        val = '[Buffer: ' + jsonStringify(json, 2, depth + 1) + ']';\n        break;\n      default:\n        val =\n          val === '[Function]' || val === '[Circular]'\n            ? val\n            : JSON.stringify(val); // string\n    }\n    return val;\n  }\n\n  for (var i in object) {\n    if (!Object.prototype.hasOwnProperty.call(object, i)) {\n      continue; // not my business\n    }\n    --length;\n    str +=\n      '\\n ' +\n      repeat(' ', space) +\n      (Array.isArray(object) ? '' : '\"' + i + '\": ') + // key\n      _stringify(object[i]) + // value\n      (length ? ',' : ''); // comma\n  }\n\n  return (\n    str +\n    // [], {}\n    (str.length !== 1 ? '\\n' + repeat(' ', --space) + end : end)\n  );\n}\n\n/**\n * Return a new Thing that has the keys in sorted order. Recursive.\n *\n * If the Thing...\n * - has already been seen, return string `'[Circular]'`\n * - is `undefined`, return string `'[undefined]'`\n * - is `null`, return value `null`\n * - is some other primitive, return the value\n * - is not a primitive or an `Array`, `Object`, or `Function`, return the value of the Thing's `toString()` method\n * - is a non-empty `Array`, `Object`, or `Function`, return the result of calling this function again.\n * - is an empty `Array`, `Object`, or `Function`, return the result of calling `emptyRepresentation()`\n *\n * @private\n * @see {@link exports.stringify}\n * @param {*} value Thing to inspect.  May or may not have properties.\n * @param {Array} [stack=[]] Stack of seen values\n * @param {string} [typeHint] Type hint\n * @return {(Object|Array|Function|string|undefined)}\n */\nexports.canonicalize = function canonicalize(value, stack, typeHint) {\n  var canonicalizedObj;\n  /* eslint-disable no-unused-vars */\n  var prop;\n  /* eslint-enable no-unused-vars */\n  typeHint = typeHint || type(value);\n  function withStack(value, fn) {\n    stack.push(value);\n    fn();\n    stack.pop();\n  }\n\n  stack = stack || [];\n\n  if (stack.indexOf(value) !== -1) {\n    return '[Circular]';\n  }\n\n  switch (typeHint) {\n    case 'undefined':\n    case 'buffer':\n    case 'null':\n      canonicalizedObj = value;\n      break;\n    case 'array':\n      withStack(value, function() {\n        canonicalizedObj = value.map(function(item) {\n          return exports.canonicalize(item, stack);\n        });\n      });\n      break;\n    case 'function':\n      /* eslint-disable guard-for-in */\n      for (prop in value) {\n        canonicalizedObj = {};\n        break;\n      }\n      /* eslint-enable guard-for-in */\n      if (!canonicalizedObj) {\n        canonicalizedObj = emptyRepresentation(value, typeHint);\n        break;\n      }\n    /* falls through */\n    case 'object':\n      canonicalizedObj = canonicalizedObj || {};\n      withStack(value, function() {\n        Object.keys(value)\n          .sort()\n          .forEach(function(key) {\n            canonicalizedObj[key] = exports.canonicalize(value[key], stack);\n          });\n      });\n      break;\n    case 'date':\n    case 'number':\n    case 'regexp':\n    case 'boolean':\n    case 'symbol':\n      canonicalizedObj = value;\n      break;\n    default:\n      canonicalizedObj = value + '';\n  }\n\n  return canonicalizedObj;\n};\n\n/**\n * Determines if pathname has a matching file extension.\n *\n * @private\n * @param {string} pathname - Pathname to check for match.\n * @param {string[]} exts - List of file extensions (sans period).\n * @return {boolean} whether file extension matches.\n * @example\n * hasMatchingExtname('foo.html', ['js', 'css']); // => false\n */\nfunction hasMatchingExtname(pathname, exts) {\n  var suffix = path.extname(pathname).slice(1);\n  return exts.some(function(element) {\n    return suffix === element;\n  });\n}\n\n/**\n * Determines if pathname would be a \"hidden\" file (or directory) on UN*X.\n *\n * @description\n * On UN*X, pathnames beginning with a full stop (aka dot) are hidden during\n * typical usage. Dotfiles, plain-text configuration files, are prime examples.\n *\n * @see {@link http://xahlee.info/UnixResource_dir/writ/unix_origin_of_dot_filename.html|Origin of Dot File Names}\n *\n * @private\n * @param {string} pathname - Pathname to check for match.\n * @return {boolean} whether pathname would be considered a hidden file.\n * @example\n * isHiddenOnUnix('.profile'); // => true\n */\nfunction isHiddenOnUnix(pathname) {\n  return path.basename(pathname)[0] === '.';\n}\n\n/**\n * Lookup file names at the given `path`.\n *\n * @description\n * Filenames are returned in _traversal_ order by the OS/filesystem.\n * **Make no assumption that the names will be sorted in any fashion.**\n *\n * @public\n * @memberof Mocha.utils\n * @param {string} filepath - Base path to start searching from.\n * @param {string[]} [extensions=[]] - File extensions to look for.\n * @param {boolean} [recursive=false] - Whether to recurse into subdirectories.\n * @return {string[]} An array of paths.\n * @throws {Error} if no files match pattern.\n * @throws {TypeError} if `filepath` is directory and `extensions` not provided.\n */\nexports.lookupFiles = function lookupFiles(filepath, extensions, recursive) {\n  extensions = extensions || [];\n  recursive = recursive || false;\n  var files = [];\n  var stat;\n\n  if (!fs.existsSync(filepath)) {\n    var pattern;\n    if (glob.hasMagic(filepath)) {\n      // Handle glob as is without extensions\n      pattern = filepath;\n    } else {\n      // glob pattern e.g. 'filepath+(.js|.ts)'\n      var strExtensions = extensions\n        .map(function(v) {\n          return '.' + v;\n        })\n        .join('|');\n      pattern = filepath + '+(' + strExtensions + ')';\n    }\n    files = glob.sync(pattern, {nodir: true});\n    if (!files.length) {\n      throw createNoFilesMatchPatternError(\n        'Cannot find any files matching pattern ' + exports.dQuote(filepath),\n        filepath\n      );\n    }\n    return files;\n  }\n\n  // Handle file\n  try {\n    stat = fs.statSync(filepath);\n    if (stat.isFile()) {\n      return filepath;\n    }\n  } catch (err) {\n    // ignore error\n    return;\n  }\n\n  // Handle directory\n  fs.readdirSync(filepath).forEach(function(dirent) {\n    var pathname = path.join(filepath, dirent);\n    var stat;\n\n    try {\n      stat = fs.statSync(pathname);\n      if (stat.isDirectory()) {\n        if (recursive) {\n          files = files.concat(lookupFiles(pathname, extensions, recursive));\n        }\n        return;\n      }\n    } catch (err) {\n      // ignore error\n      return;\n    }\n    if (!extensions.length) {\n      throw createMissingArgumentError(\n        util.format(\n          'Argument %s required when argument %s is a directory',\n          exports.sQuote('extensions'),\n          exports.sQuote('filepath')\n        ),\n        'extensions',\n        'array'\n      );\n    }\n\n    if (\n      !stat.isFile() ||\n      !hasMatchingExtname(pathname, extensions) ||\n      isHiddenOnUnix(pathname)\n    ) {\n      return;\n    }\n    files.push(pathname);\n  });\n\n  return files;\n};\n\n/**\n * process.emitWarning or a polyfill\n * @see https://nodejs.org/api/process.html#process_process_emitwarning_warning_options\n * @ignore\n */\nfunction emitWarning(msg, type) {\n  if (process.emitWarning) {\n    process.emitWarning(msg, type);\n  } else {\n    process.nextTick(function() {\n      console.warn(type + ': ' + msg);\n    });\n  }\n}\n\n/**\n * Show a deprecation warning. Each distinct message is only displayed once.\n * Ignores empty messages.\n *\n * @param {string} [msg] - Warning to print\n * @private\n */\nexports.deprecate = function deprecate(msg) {\n  msg = String(msg);\n  if (msg && !deprecate.cache[msg]) {\n    deprecate.cache[msg] = true;\n    emitWarning(msg, 'DeprecationWarning');\n  }\n};\nexports.deprecate.cache = {};\n\n/**\n * Show a generic warning.\n * Ignores empty messages.\n *\n * @param {string} [msg] - Warning to print\n * @private\n */\nexports.warn = function warn(msg) {\n  if (msg) {\n    emitWarning(msg);\n  }\n};\n\n/**\n * @summary\n * This Filter based on `mocha-clean` module.(see: `github.com/rstacruz/mocha-clean`)\n * @description\n * When invoking this function you get a filter function that get the Error.stack as an input,\n * and return a prettify output.\n * (i.e: strip Mocha and internal node functions from stack trace).\n * @returns {Function}\n */\nexports.stackTraceFilter = function() {\n  // TODO: Replace with `process.browser`\n  var is = typeof document === 'undefined' ? {node: true} : {browser: true};\n  var slash = path.sep;\n  var cwd;\n  if (is.node) {\n    cwd = exports.cwd() + slash;\n  } else {\n    cwd = (typeof location === 'undefined'\n      ? window.location\n      : location\n    ).href.replace(/\\/[^/]*$/, '/');\n    slash = '/';\n  }\n\n  function isMochaInternal(line) {\n    return (\n      ~line.indexOf('node_modules' + slash + 'mocha' + slash) ||\n      ~line.indexOf(slash + 'mocha.js') ||\n      ~line.indexOf(slash + 'mocha.min.js')\n    );\n  }\n\n  function isNodeInternal(line) {\n    return (\n      ~line.indexOf('(timers.js:') ||\n      ~line.indexOf('(events.js:') ||\n      ~line.indexOf('(node.js:') ||\n      ~line.indexOf('(module.js:') ||\n      ~line.indexOf('GeneratorFunctionPrototype.next (native)') ||\n      false\n    );\n  }\n\n  return function(stack) {\n    stack = stack.split('\\n');\n\n    stack = stack.reduce(function(list, line) {\n      if (isMochaInternal(line)) {\n        return list;\n      }\n\n      if (is.node && isNodeInternal(line)) {\n        return list;\n      }\n\n      // Clean up cwd(absolute)\n      if (/:\\d+:\\d+\\)?$/.test(line)) {\n        line = line.replace('(' + cwd, '(');\n      }\n\n      list.push(line);\n      return list;\n    }, []);\n\n    return stack.join('\\n');\n  };\n};\n\n/**\n * Crude, but effective.\n * @public\n * @param {*} value\n * @returns {boolean} Whether or not `value` is a Promise\n */\nexports.isPromise = function isPromise(value) {\n  return (\n    typeof value === 'object' &&\n    value !== null &&\n    typeof value.then === 'function'\n  );\n};\n\n/**\n * Clamps a numeric value to an inclusive range.\n *\n * @param {number} value - Value to be clamped.\n * @param {numer[]} range - Two element array specifying [min, max] range.\n * @returns {number} clamped value\n */\nexports.clamp = function clamp(value, range) {\n  return Math.min(Math.max(value, range[0]), range[1]);\n};\n\n/**\n * Single quote text by combining with undirectional ASCII quotation marks.\n *\n * @description\n * Provides a simple means of markup for quoting text to be used in output.\n * Use this to quote names of variables, methods, and packages.\n *\n * <samp>package 'foo' cannot be found</samp>\n *\n * @private\n * @param {string} str - Value to be quoted.\n * @returns {string} quoted value\n * @example\n * sQuote('n') // => 'n'\n */\nexports.sQuote = function(str) {\n  return \"'\" + str + \"'\";\n};\n\n/**\n * Double quote text by combining with undirectional ASCII quotation marks.\n *\n * @description\n * Provides a simple means of markup for quoting text to be used in output.\n * Use this to quote names of datatypes, classes, pathnames, and strings.\n *\n * <samp>argument 'value' must be \"string\" or \"number\"</samp>\n *\n * @private\n * @param {string} str - Value to be quoted.\n * @returns {string} quoted value\n * @example\n * dQuote('number') // => \"number\"\n */\nexports.dQuote = function(str) {\n  return '\"' + str + '\"';\n};\n\n/**\n * It's a noop.\n * @public\n */\nexports.noop = function() {};\n\n/**\n * Creates a map-like object.\n *\n * @description\n * A \"map\" is an object with no prototype, for our purposes. In some cases\n * this would be more appropriate than a `Map`, especially if your environment\n * doesn't support it. Recommended for use in Mocha's public APIs.\n *\n * @public\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map|MDN:Map}\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create#Custom_and_Null_objects|MDN:Object.create - Custom objects}\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign|MDN:Object.assign}\n * @param {...*} [obj] - Arguments to `Object.assign()`.\n * @returns {Object} An object with no prototype, having `...obj` properties\n */\nexports.createMap = function(obj) {\n  return assign.apply(\n    null,\n    [Object.create(null)].concat(Array.prototype.slice.call(arguments))\n  );\n};\n\n/**\n * Creates a read-only map-like object.\n *\n * @description\n * This differs from {@link module:utils.createMap createMap} only in that\n * the argument must be non-empty, because the result is frozen.\n *\n * @see {@link module:utils.createMap createMap}\n * @param {...*} [obj] - Arguments to `Object.assign()`.\n * @returns {Object} A frozen object with no prototype, having `...obj` properties\n * @throws {TypeError} if argument is not a non-empty object.\n */\nexports.defineConstants = function(obj) {\n  if (type(obj) !== 'object' || !Object.keys(obj).length) {\n    throw new TypeError('Invalid argument; expected a non-empty object');\n  }\n  return Object.freeze(exports.createMap(obj));\n};\n\n/**\n * Whether current version of Node support ES modules\n *\n * @description\n * Versions prior to 10 did not support ES Modules, and version 10 has an old incompatibile version of ESM.\n * This function returns whether Node.JS has ES Module supports that is compatible with Mocha's needs,\n * which is version >=12.11.\n *\n * @returns {Boolean} whether the current version of Node.JS supports ES Modules in a way that is compatible with Mocha\n */\nexports.supportsEsModules = function() {\n  if (!process.browser && process.versions && process.versions.node) {\n    var versionFields = process.versions.node.split('.');\n    var major = +versionFields[0];\n    var minor = +versionFields[1];\n\n    if (major >= 13 || (major === 12 && minor >= 11)) {\n      return true;\n    }\n  }\n};\n\n/**\n * Returns current working directory\n *\n * Wrapper around `process.cwd()` for isolation\n * @private\n */\nexports.cwd = function cwd() {\n  return process.cwd();\n};\n"]},"metadata":{},"sourceType":"script"}